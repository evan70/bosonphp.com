{% if blog_categories is not defined %}
    {% set blog_categories = blog.categories %}
{% endif %}

{% if docs_version is not defined %}
    {% set docs_version = docs.currentVersion %}
{% endif %}

{% if docs_categories is not defined %}
    {% set docs_categories = docs_version.categories ?? [] %}
{% endif %}

<app-header>
    <boson-header-button slot="logo" href="{{ path('home') }}">
        <img class="logo" src="/images/logo.svg" alt="logo" />
    </boson-header-button>

    <boson-header-dropdown href="{{ path('doc.index') }}">
        <boson-header-link slot="summary"
                {{ app.current_route starts with 'doc.' ? 'active' : '' }}
                href="{{ path('doc.index') }}">References</boson-header-link>

        {% for docs_category in docs_categories %}
            <boson-header-link
                {% if docs_category.page is not null and docs_version is not null %}
                    href="{{ path('doc.show', {
                        page: docs_category.page.uri,
                        version: docs_version.name
                    }) }}"
                {% endif %}
            >
                {% if docs_category.icon is not null %}
                    <img src="{{ docs_category.icon }}"
                         width="16" height="16" />
                    &nbsp;
                {% endif %}

                {{ docs_category.title }}
            </boson-header-link>
        {% endfor %}
    </boson-header-dropdown>

    <boson-header-dropdown href="{{ path('blog.index') }}">
        <boson-header-link slot="summary"
                {{ app.current_route starts with 'blog.' ? 'active' : '' }}
                href="{{ path('blog.index') }}">Blog</boson-header-link>

        {% for blog_category in blog_categories %}
            <boson-header-link href="{{ path('blog.index_by_category', {
                slug: blog_category.uri
            }) }}">
                {{ blog_category.title }}
            </boson-header-link>
        {% endfor %}
    </boson-header-dropdown>


    <boson-header-button slot="aside" external href="https://github.com/boson-php/boson">
        <img src="/images/icons/github.svg" alt="github"/>
        GitHub
    </boson-header-button>

    <boson-header-button slot="aside" href="{{ path('doc.show', {
        version: docs_version.name,
        page: 'introduction'
    }) }}">
        Get Started
        <img src="/images/icons/arrow_up_right.svg" alt="arrow_up_right" />
    </boson-header-button>

    {# TODO
    <ul>
        <li>
            <details class="dropdown">
                <summary role="button" class="outline secondary">
                    {% if app.current_route == 'doc.index' %}
                        <span>References</span>
                    {% else %}
                        <a href="{{ path('doc.index') }}">References</a>
                    {% endif %}
                </summary>
                <ul>
                    {% for docs_category in docs_categories %}
                        <li>
                            {% if docs_category.page is not null and docs_version is not null %}
                                <a href="{{ path('doc.show', {
                                    page: docs_category.page.uri,
                                    version: docs_version.name
                                }) }}">
                                    {% if docs_category.icon is not null %}
                                        <img src="{{ docs_category.icon }}"
                                             width="16" height="16" />
                                        &nbsp;
                                    {% endif %}
                                    {{ docs_category.title }}
                                </a>
                            {% else %}
                                <span>
                                    {% if docs_category.icon is not null %}
                                        <img src="{{ docs_category.icon }}"
                                             width="16" height="16" />
                                        &nbsp;
                                    {% endif %}
                                    {{ docs_category.title }}
                                </span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </details>
        </li>
        <li>
            <details class="dropdown">
                <summary role="button" class="outline secondary">
                    {% if app.current_route == 'blog.index' %}
                        <span>Blog</span>
                    {% else %}
                        <a href="{{ path('blog.index') }}">Blog</a>
                    {% endif %}
                </summary>
                <ul>
                    {% for blog_category in blog_categories %}
                        <li>
                            <a href="{{ path('blog.index_by_category', {
                                slug: blog_category.uri
                            }) }}">
                                {{ blog_category.title }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </details>
        </li>
        <li>
            <form method="get" action="{{ path('search.index') }}">
                <input
                    style="width: 10px"
                    onfocus="this.style.width = '300px'"
                    onblur="this.style.width = '10px'"
                    type="search"
                    name="q"
                    placeholder="Search"
                    aria-label="Search"
                />
            </form>
        </li>
    </ul>
    #}
</app-header>
